"""Test module for {{ feature_name }}.

Auto-generated by AI Test Case Generator.
"""

import pytest
from playwright.sync_api import Page, expect


class {{ class_name }}:
    """Test cases for {{ feature_name }}."""
{% for test in tests %}

    def {{ test.method_name }}(self, page: Page):
        """{{ test.docstring }}
        
        Steps:
{% for step in test.steps %}
        {{ loop.index }}. {{ step.step_type|title }}: {{ step.description }}
{% endfor %}
        """
{% for action in test.setup_actions %}
        # Setup
        {% if action.action_type == 'navigate' %}
        page.goto("{{ action.value }}")
        {% endif %}
{% endfor %}
{% for action in test.actions %}
        # {{ action.comment|default('Action') }}
        {% if action.action_type == 'navigate' %}
        page.goto("{{ action.value }}")
        {% elif action.action_type == 'click' %}
        page.click("{{ action.element.selector }}")
        {% elif action.action_type == 'fill' %}
        page.fill("{{ action.element.selector }}", "{{ action.value }}")
        {% elif action.action_type == 'select' %}
        page.select_option("{{ action.element.selector }}", "{{ action.value }}")
        {% elif action.action_type == 'check' %}
        page.check("{{ action.element.selector }}")
        {% elif action.action_type == 'hover' %}
        page.hover("{{ action.element.selector }}")
        {% elif action.action_type == 'wait' %}
        page.wait_for_selector("{{ action.element.selector }}")
        {% endif %}
{% endfor %}
        
        # Assertions
{% for assertion in test.assertions %}
        {% if assertion.assertion_type == 'visible' %}
        expect(page.locator("{{ assertion.element.selector }}")).to_be_visible()
        {% elif assertion.assertion_type == 'text_contains' %}
        expect(page.locator("{{ assertion.element.selector }}")).to_contain_text("{{ assertion.expected_value }}")
        {% elif assertion.assertion_type == 'text_equals' %}
        expect(page.locator("{{ assertion.element.selector }}")).to_have_text("{{ assertion.expected_value }}")
        {% elif assertion.assertion_type == 'url_contains' %}
        expect(page).to_have_url(re.compile(".*{{ assertion.expected_value }}.*"))
        {% elif assertion.assertion_type == 'url_equals' %}
        expect(page).to_have_url("{{ assertion.expected_value }}")
        {% elif assertion.assertion_type == 'element_exists' %}
        expect(page.locator("{{ assertion.element.selector }}")).to_have_count(1)
        {% elif assertion.assertion_type == 'enabled' %}
        expect(page.locator("{{ assertion.element.selector }}")).to_be_enabled()
        {% elif assertion.assertion_type == 'disabled' %}
        expect(page.locator("{{ assertion.element.selector }}")).to_be_disabled()
        {% endif %}
{% endfor %}
{% endfor %}

