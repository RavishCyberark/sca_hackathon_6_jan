"""API Test module for {{ feature_name }}.

Auto-generated by AI Test Case Generator.
Target API: {{ base_url }}
"""

import pytest
import requests
from typing import Optional
import json


class {{ class_name }}:
    """API Test cases for {{ feature_name }}."""
    
    BASE_URL = "{{ base_url }}"
    ENDPOINT = "{{ endpoint }}"
    
    @pytest.fixture(autouse=True)
    def setup(self):
        """Setup for each test."""
        self.session = requests.Session()
        # Authentication
        self.auth = ("{{ username }}", "{{ password }}")
        self.headers = {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }
        yield
        self.session.close()
    
    def get_base_payload(self) -> dict:
        """Return the base payload for API requests."""
        return {{ base_payload | tojson(indent=8) }}
{% for test in tests %}

    def {{ test.method_name }}(self):
        """{{ test.docstring }}"""
        # Arrange
        payload = self.get_base_payload()
        {% for modification in test.payload_modifications %}
        {{ modification }}
        {% endfor %}
        
        # Act
        response = self.session.{{ test.http_method | lower }}(
            f"{self.BASE_URL}{self.ENDPOINT}",
            json=payload,
            headers=self.headers,
            auth=self.auth
        )
        
        # Assert
        {% for assertion in test.assertions %}
        {{ assertion }}
        {% endfor %}
{% endfor %}

